<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Admin Produk — Warung Emung</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<h1>🛒 Admin Produk — Warung Emung</h1>

<!-- FORM TAMBAH -->
<div class="card">
  <strong>Tambah Produk</strong>
  <label>Nama Produk</label>
  <input id="name" type="text">
  <label>Harga (Rp)</label>
  <input id="price" type="number">
  <label>Kategori</label>
  <input id="category" type="text">
  <label>Nama Gambar</label>
  <input id="imageName" type="text">
  <div class="controls">
    <button class="btn-add" onclick="addProduct()">+ Tambah Produk</button>
    <button class="btn-add" onclick="addProductPreset()">+ Contoh Cepat</button>
  </div>
</div>

<!-- INPUT JSON -->
<div class="card">
  <strong>📥 Input Data JSON Manual</strong>
  <textarea id="jsonInput" placeholder='Tempelkan array JSON di sini...'></textarea>
  <div class="controls">
    <button class="btn-add" onclick="importJSON()">📤 Tambah dari JSON</button>
    <button class="btn-clear" onclick="clearJSONInput()">🗑️ Hapus Semua</button>
  </div>
</div>

<!-- FILTER -->
<div class="card">
  <strong>🔍 Filter & Urut Produk</strong>
  <div class="flex-between">
    <div style="flex:1">
      <label>Kategori</label>
      <select id="filterCategory" onchange="applyFilter()">
        <option value="">Semua</option>
      </select>
    </div>
    <div style="flex:1">
      <label>Urut Berdasarkan</label>
      <select id="sortOption" onchange="applyFilter()">
        <option value="">Tidak diurutkan</option>
        <option value="nameAsc">Nama (A–Z)</option>
        <option value="nameDesc">Nama (Z–A)</option>
        <option value="priceLow">Harga Termurah</option>
        <option value="priceHigh">Harga Termahal</option>
      </select>
    </div>
    <div>
      <button class="btn-clear" onclick="resetFilter()">🔄 Reset</button>
    </div>
  </div>
  <div style="margin:10px 0;">
    <input type="text" id="searchInput" placeholder="Cari produk..." oninput="applyFilter()" style="padding:6px 8px;width:200px;border-radius:6px;border:1px solid #ccc;">
  </div>
</div>

<!-- TABEL -->
<div class="card table-wrap">
  <div class="flex-between">
    <strong>Daftar Produk</strong>
    <div>
      <button class="btn-clear" onclick="clearAllProducts()">🗑️ Hapus Semua Produk</button>
    </div>
  </div>
  <small class="muted">Klik sel untuk edit</small>
  <table id="productTable">
    <thead>
      <tr><th>No</th><th>Nama</th><th>Harga</th><th>Kategori</th><th>Gambar</th><th>Aksi</th></tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<!-- UPLOAD -->
<div class="card">
  <label>GitHub Token</label>
  <input id="githubToken" type="text">
  <div class="controls">
    <button class="btn-upload" id="uploadBtn" onclick="uploadToGitHub()">🚀 Upload ke GitHub</button>
    <button class="btn-backup" onclick="downloadJSON()">⬇️ Download JSON</button>
    <button class="btn-backup" onclick="exportToExcel()">⬇️ Export Excel</button>
  </div>

  <!-- Upload gambar massal -->
  <div class="controls">
    <input type="file" id="filePicker" multiple accept="image/*">
    <button class="btn-upload" id="uploadMassalBtn">🚀 Upload Gambar Massal</button>
  </div>

  <!-- Daftar preview gambar -->
  <div id="previewArea" class="preview-area"></div>
</div>
<!-- Tombol hapus file di GitHub -->
<div style="margin-top:10px">
  <input type="text" id="filePathDelete" placeholder="contoh: data/produk.json" style="width:70%;padding:6px">
  <button onclick="hapusFileRepo()">🗑️ Hapus File di Repo</button>
</div>


<!-- OUTPUT -->
<div class="card">
  <button class="btn-copy" onclick="copyJSON()">📋 Copy</button>
  <button class="btn-clear" onclick="clearJSONOutput()">🗑️ Hapus JSON</button>
  <strong>Hasil Generate</strong>
  <pre id="jsonOutput">[ Kosong ]</pre>
</div>

<script src="script.js"></script>

<!-- Tombol Floating -->
<button class="fab" onclick="document.querySelector('#name').focus()" title="Tambah Produk">＋</button>

<!-- Navigasi Bawah -->
<nav class="bottom-nav">
  <button onclick="window.scrollTo({top:0,behavior:'smooth'})">
    <span class="icon">🏠</span><span>Atas</span>
  </button>
  <button onclick="document.querySelector('#jsonInput').scrollIntoView({behavior:'smooth'})">
    <span class="icon">📥</span><span>Input JSON</span>
  </button>
  <button onclick="document.querySelector('.table-wrap').scrollIntoView({behavior:'smooth'})">
    <span class="icon">📋</span><span>Tabel</span>
  </button>
  <button onclick="generateAndScrollJSON()">
    <span class="icon">💾</span><span>Generate JSON</span>
  </button>
</nav>

</body>
</html>
